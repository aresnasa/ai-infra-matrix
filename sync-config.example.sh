# 同步配置文件示例
# 复制此文件并修改为实际配置

#-------------------------------------------------------------------------------
# 机器1（跳板机）配置
#-------------------------------------------------------------------------------
JUMP_HOST_1="user1@192.168.1.10"
JUMP_HOST_1_PORT="22"
JUMP_HOST_1_KEY=""  # 留空使用默认密钥，或指定: ~/.ssh/id_rsa

#-------------------------------------------------------------------------------
# 机器2（源数据机器，通过机器1访问）配置
#-------------------------------------------------------------------------------
SOURCE_HOST_2="user2@192.168.1.20"
SOURCE_HOST_2_PORT="22"
SOURCE_HOST_2_KEY=""

#-------------------------------------------------------------------------------
# 机器3（最终目标机器）配置
#-------------------------------------------------------------------------------
TARGET_HOST_3="user3@192.168.1.30"
TARGET_HOST_3_PORT="22"
TARGET_HOST_3_KEY=""

#-------------------------------------------------------------------------------
# 路径配置
#-------------------------------------------------------------------------------
# 机器2上的源文件/文件夹路径（要同步的数据）
SOURCE_PATH_ON_HOST2="/data/important-files/"

# 机器1上的临时存放路径
TEMP_PATH_ON_HOST1="/tmp/sync-staging/"

# 本地临时存放路径
LOCAL_PATH="/tmp/sync-local/"

# 机器3上的目标路径
TARGET_PATH_ON_HOST3="/data/backup/"

#-------------------------------------------------------------------------------
# rsync 选项
#-------------------------------------------------------------------------------
# -a: 归档模式（保留权限、时间戳等）
# -v: 详细输出
# -z: 压缩传输
# --progress: 显示进度
# --delete: 删除目标端多余文件（镜像同步）
# 
# 如果不想删除目标多余文件，去掉 --delete
RSYNC_OPTS="-avz --progress --delete"

#-------------------------------------------------------------------------------
# 清理选项
#-------------------------------------------------------------------------------
# 是否在同步完成后清理临时文件
CLEANUP_LOCAL=false   # 清理本地临时文件
CLEANUP_HOST1=false   # 清理机器1临时文件



"""
# 1. 复制配置文件
cp scripts/sync-config.example.sh scripts/sync-config.sh

# 2. 编辑配置
vim scripts/sync-config.sh

# 3. 模拟运行（不实际执行）
./scripts/sync-remote-files.sh -c scripts/sync-config.sh --dry-run

# 4. 执行同步
./scripts/sync-remote-files.sh -c scripts/sync-config.sh

# 5. 同步后清理临时文件
./scripts/sync-remote-files.sh -c scripts/sync-config.sh --cleanup
"""