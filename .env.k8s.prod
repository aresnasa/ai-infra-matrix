# Kubernetes多节点部署的生产环境配置
# 基于.env.prod修改，支持分布式访问

# 集群访问配置 - 支持多节点访问
DOMAIN=192.168.0.199
JUPYTERHUB_PUBLIC_HOST=192.168.0.199:8080

# JupyterHub配置
JUPYTERHUB_SPAWNER=kubernetes
KUBERNETES_NAMESPACE=ai-infra-users  
KUBERNETES_SERVICE_ACCOUNT=ai-infra-matrix-jupyterhub
JUPYTERHUB_STORAGE_CLASS=local-path
SHARED_STORAGE_CLASS=nfs-client
SHARED_STORAGE_ENABLED=true

# JupyterHub资源配置
JUPYTERHUB_MEM_LIMIT=2G
JUPYTERHUB_CPU_LIMIT=1.0
JUPYTERHUB_MEM_GUARANTEE=1G
JUPYTERHUB_CPU_GUARANTEE=0.5
JUPYTERHUB_START_TIMEOUT=300
JUPYTERHUB_HTTP_TIMEOUT=120

# 网络配置
CORS_ORIGINS=http://192.168.0.199:8080,http://localhost:8080
JUPYTERHUB_CORS_ORIGIN=http://192.168.0.199:8080

# 数据库配置
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=ai_infra_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=ansible-postgres-password

# Redis配置
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=ansible-redis-password
REDIS_DB=1

# 认证配置
JWT_SECRET=ai-infra-secret-key-change-in-production
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=168h

# 会话配置
SESSION_SECRET=ai-infra-session-secret-key
SESSION_TIMEOUT=86400

# LDAP配置
LDAP_HOST=openldap
LDAP_PORT=389
LDAP_ADMIN_DN=cn=admin,dc=ai-infra,dc=local
LDAP_ADMIN_PASSWORD=admin
LDAP_BASE_DN=dc=ai-infra,dc=local
LDAP_USER_DN=ou=users,dc=ai-infra,dc=local
LDAP_GROUP_DN=ou=groups,dc=ai-infra,dc=local

# MinIO配置
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=minio
MINIO_SECRET_KEY=minio123
MINIO_BUCKET=ai-infra-storage

# Gitea配置
GITEA_HOST=gitea
GITEA_PORT=3000
GITEA_ADMIN_USER=admin
GITEA_ADMIN_PASSWORD=demo-gitea-admin-password
GITEA_ADMIN_TOKEN=demo-gitea-admin-token

# 安全配置
CONFIGPROXY_AUTH_TOKEN=ai-infra-proxy-token-dev
JUPYTERHUB_CRYPT_KEY=790031b2deeb70d780d4ccd100514b37f3c168ce80141478bf80aebfb65580c1

# AI-Infra特定配置
AI_INFRA_BACKEND_URL=http://backend:8082
AI_INFRA_API_TOKEN=ai-infra-hub-token
USE_CUSTOM_AUTH=true

# 服务配置
BACKEND_HOST=backend
BACKEND_PORT=8082
FRONTEND_HOST=frontend
FRONTEND_PORT=80
NGINX_HOST=nginx
NGINX_PORT=80

# 日志配置
LOG_LEVEL=INFO
JUPYTERHUB_LOG_LEVEL=INFO
JUPYTERHUB_DEBUG=false
JUPYTERHUB_ACCESS_LOG=true

# 功能开关
JUPYTERHUB_AUTO_LOGIN=true
JUPYTERHUB_DEV_MODE=false
JUPYTERHUB_USE_PROXY=true
JUPYTERHUB_IDLE_CULLER_ENABLED=true
JUPYTERHUB_IDLE_TIMEOUT=3600
JUPYTERHUB_CULL_TIMEOUT=7200

# 镜像配置
JUPYTERHUB_IMAGE=ai-infra-singleuser:v0.3.6-dev
