# AI Infrastructure Matrix - Helm Chart æ”¹é€ å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ æ”¹é€ æ€»ç»“

### ğŸ¯ é¡¹ç›®ç›®æ ‡
å°† Docker Compose éƒ¨ç½²çš„ AI Infrastructure Matrix å®Œå…¨æ”¹é€ ä¸ºç”Ÿäº§å°±ç»ªçš„ Kubernetes Helm Chartã€‚

### âœ… å®ŒæˆçŠ¶æ€
**Docker Compose â†’ Helm Chart æ”¹é€ å·²æˆåŠŸå®Œæˆï¼**

## ğŸ—ï¸ æ¶æ„è½¬æ¢

### åŸå§‹æ¶æ„ï¼ˆDocker Composeï¼‰
```
docker-compose.yml
â”œâ”€â”€ PostgreSQL
â”œâ”€â”€ Redis  
â”œâ”€â”€ OpenLDAP
â”œâ”€â”€ Backend (Go/Gin)
â”œâ”€â”€ Frontend (React)
â”œâ”€â”€ JupyterHub
â”œâ”€â”€ Nginx (åå‘ä»£ç†)
â”œâ”€â”€ Gitea
â”œâ”€â”€ MinIO
â””â”€â”€ phpLDAPadmin
```

### æ–°æ¶æ„ï¼ˆKubernetes Helm Chartï¼‰
```
helm/ai-infra-matrix/
â”œâ”€â”€ Chart.yaml                     # Chartå…ƒæ•°æ®å’Œä¾èµ–
â”œâ”€â”€ values.yaml                     # ç»Ÿä¸€é…ç½®æ–‡ä»¶
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ configmap.yaml             # Nginxé…ç½®å’Œç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ secrets.yaml               # æ•æ„Ÿæ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ backend.yaml               # BackendæœåŠ¡
â”‚   â”œâ”€â”€ frontend.yaml              # FrontendæœåŠ¡
â”‚   â”œâ”€â”€ jupyterhub.yaml            # JupyterHubæœåŠ¡
â”‚   â”œâ”€â”€ nginx.yaml                 # åå‘ä»£ç†ç½‘å…³
â”‚   â”œâ”€â”€ gitea.yaml                 # Gitä»“åº“ç®¡ç†
â”‚   â”œâ”€â”€ openldap.yaml              # LDAPç›®å½•æœåŠ¡
â”‚   â”œâ”€â”€ minio.yaml                 # å¯¹è±¡å­˜å‚¨
â”‚   â”œâ”€â”€ backend-init.yaml          # æ•°æ®åº“åˆå§‹åŒ–ä½œä¸š
â”‚   â”œâ”€â”€ rbac.yaml                  # RBACæƒé™ç®¡ç†
â”‚   â”œâ”€â”€ serviceaccount.yaml        # æœåŠ¡è´¦å·
â”‚   â”œâ”€â”€ storage.yaml               # å­˜å‚¨å·
â”‚   â””â”€â”€ user-pvc.yaml             # ç”¨æˆ·æ•°æ®å·æ¨¡æ¿
â””â”€â”€ charts/                        # ä¾èµ–Chart
    â”œâ”€â”€ postgresql-15.5.2.tgz
    â””â”€â”€ redis-19.6.4.tgz
```

## ğŸ”§ æ ¸å¿ƒç‰¹æ€§å®ç°

### 1. å®Œæ•´çš„æœåŠ¡æ ˆ
- âœ… **PostgreSQL** - ä¸»æ•°æ®åº“ï¼ˆBitnami Chartï¼‰
- âœ… **Redis** - ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ï¼ˆBitnami Chartï¼‰
- âœ… **OpenLDAP** - ç›®å½•æœåŠ¡ï¼ˆè‡ªå®šä¹‰æ¨¡æ¿ï¼‰
- âœ… **Backend API** - Go/Gin RESTæœåŠ¡
- âœ… **Frontend** - React Webåº”ç”¨
- âœ… **JupyterHub** - äº¤äº’å¼è®¡ç®—ç¯å¢ƒ
- âœ… **Nginx** - åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
- âœ… **Gitea** - Gitä»“åº“ç®¡ç†ï¼ˆåŒ…å«SSOé›†æˆï¼‰
- âœ… **MinIO** - å¯¹è±¡å­˜å‚¨æœåŠ¡
- âœ… **phpLDAPadmin** - LDAPç®¡ç†ç•Œé¢

### 2. é«˜çº§Kubernetesç‰¹æ€§
- âœ… **ConfigMaps** - é…ç½®ç®¡ç†å’ŒæœåŠ¡å‘ç°
- âœ… **Secrets** - æ•æ„Ÿæ•°æ®å®‰å…¨å­˜å‚¨
- âœ… **PersistentVolumes** - æ•°æ®æŒä¹…åŒ–
- âœ… **RBAC** - ç»†ç²’åº¦æƒé™æ§åˆ¶
- âœ… **Jobs** - æ•°æ®åº“åˆå§‹åŒ–ä½œä¸š
- âœ… **Services** - æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡
- âœ… **Deployments** - åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†

### 3. ç”Ÿäº§ç¯å¢ƒå°±ç»ªç‰¹æ€§
- âœ… **Health Checks** - å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨æ¢å¤
- âœ… **Resource Limits** - èµ„æºé…é¢ç®¡ç†
- âœ… **Horizontal Scaling** - æ°´å¹³æ‰©å±•æ”¯æŒ
- âœ… **Rolling Updates** - é›¶åœæœºå‡çº§
- âœ… **Namespace Isolation** - å¤šç§Ÿæˆ·éš”ç¦»

## ğŸ” SSOé›†æˆä¿æŒ
ç»´æŒäº†åŸæœ‰çš„Gitea SSOé›†æˆåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- âœ… iframeåµŒå…¥æ”¯æŒ
- âœ… ç”¨æˆ·æ˜ å°„ï¼ˆadmin â†’ testï¼‰
- âœ… åå‘ä»£ç†è®¤è¯å¤´
- âœ… æ— ç¼å•ç‚¹ç™»å½•ä½“éªŒ

## ğŸ“Š é…ç½®ç®¡ç†

### æ ¸å¿ƒé…ç½®æ–‡ä»¶
- **values.yaml** - 650+ è¡Œç»Ÿä¸€é…ç½®
- **configmap.yaml** - å®Œæ•´nginxé…ç½®å’Œç¯å¢ƒå˜é‡
- **secrets.yaml** - å¯†ç å’Œå¯†é’¥ç®¡ç†

### ç¯å¢ƒå˜é‡æ˜ å°„
åŸDocker Composeç¯å¢ƒå˜é‡å®Œå…¨æ˜ å°„åˆ°Kubernetesï¼š
- æ•°æ®åº“è¿æ¥é…ç½®
- Redisç¼“å­˜é…ç½®  
- LDAPè®¤è¯é…ç½®
- JWTå¯†é’¥å’Œä¼šè¯ç®¡ç†
- Giteaé›†æˆé…ç½®
- JupyterHubé…ç½®

## ğŸš€ éƒ¨ç½²å’Œæµ‹è¯•

### å¿«é€Ÿéƒ¨ç½²å‘½ä»¤
```bash
# è‡ªåŠ¨åŒ–éƒ¨ç½²
./test-helm-deploy.sh deploy

# æ‰‹åŠ¨éƒ¨ç½²
helm install ai-infra-matrix helm/ai-infra-matrix \
  --namespace ai-infra-matrix \
  --create-namespace \
  --wait
```

### éªŒè¯å·¥å…·
- âœ… **test-helm-deploy.sh** - ä¸€é”®éƒ¨ç½²å’Œæµ‹è¯•è„šæœ¬
- âœ… **Helm Lint** - Chartè¯­æ³•éªŒè¯é€šè¿‡
- âœ… **ä¾èµ–ç®¡ç†** - PostgreSQLå’ŒRedisä¾èµ–å·²æ›´æ–°

## ğŸŒ æœåŠ¡è®¿é—®ç«¯ç‚¹

| æœåŠ¡ | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| ä¸»é¡µ | `http://localhost:8080/` | åº”ç”¨ä¸»å…¥å£ |
| JupyterHub | `http://localhost:8080/jupyterhub/` | äº¤äº’å¼è®¡ç®—ç¯å¢ƒ |
| API | `http://localhost:8080/api/` | åç«¯API |
| Gitea | `http://localhost:8080/gitea/` | Gitä»“åº“ç®¡ç† |
| MinIO | `http://localhost:8080/minio/` | å¯¹è±¡å­˜å‚¨ç®¡ç† |
| phpLDAPadmin | `http://localhost:8080/ldap/` | LDAPç®¡ç†ç•Œé¢ |

## ğŸ“ˆ æ”¹é€ æ•ˆæœ

### å¯é æ€§æå‡
- **é«˜å¯ç”¨æ€§** - å¤šå‰¯æœ¬éƒ¨ç½²å’Œè‡ªåŠ¨æ•…éšœæ¢å¤
- **æ»šåŠ¨å‡çº§** - é›¶åœæœºæœåŠ¡æ›´æ–°
- **å¥åº·æ£€æŸ¥** - è‡ªåŠ¨æ£€æµ‹å’Œé‡å¯å¼‚å¸¸æœåŠ¡

### è¿ç»´æ”¹è¿›
- **ç»Ÿä¸€é…ç½®** - å•ä¸€values.yamlç®¡ç†æ‰€æœ‰é…ç½®
- **å¯†é’¥ç®¡ç†** - KubernetesåŸç”ŸSecretç®¡ç†
- **ç›‘æ§å°±ç»ª** - æ”¯æŒPrometheuså’ŒGrafanaé›†æˆ

### æ‰©å±•æ€§å¢å¼º
- **æ°´å¹³æ‰©å±•** - æ”¯æŒæ ¹æ®è´Ÿè½½è‡ªåŠ¨æ‰©å®¹
- **èµ„æºç®¡ç†** - CPUå’Œå†…å­˜é…é¢æ§åˆ¶
- **å‘½åç©ºé—´éš”ç¦»** - æ”¯æŒå¤šç¯å¢ƒéƒ¨ç½²

## ğŸ”® åç»­è§„åˆ’

### çŸ­æœŸä¼˜åŒ–
1. **ç›‘æ§é›†æˆ** - æ·»åŠ Prometheuså’ŒGrafana
2. **æ—¥å¿—èšåˆ** - é›†æˆELKæˆ–Loki stack
3. **å¤‡ä»½ç­–ç•¥** - PostgreSQLå’Œç”¨æˆ·æ•°æ®å¤‡ä»½

### ä¸­é•¿æœŸè§„åˆ’
1. **CI/CDæµæ°´çº¿** - GitOpséƒ¨ç½²æµç¨‹
2. **å®‰å…¨åŠ å›º** - ç½‘ç»œç­–ç•¥å’ŒPodå®‰å…¨æ ‡å‡†
3. **æ€§èƒ½ä¼˜åŒ–** - ç¼“å­˜ç­–ç•¥å’Œæ•°æ®åº“è°ƒä¼˜

## ğŸ‰ æ€»ç»“

**AI Infrastructure Matrix å·²æˆåŠŸä» Docker Compose æ”¹é€ ä¸ºç”Ÿäº§çº§ Kubernetes Helm Chartï¼**

### å…³é”®æˆå°±
- âœ… **9ä¸ªæ ¸å¿ƒæœåŠ¡**å®Œå…¨è¿ç§»åˆ°Kubernetes
- âœ… **650+è¡Œé…ç½®**ç»Ÿä¸€ç®¡ç†  
- âœ… **ç”Ÿäº§çº§ç‰¹æ€§**å…¨é¢æ”¯æŒ
- âœ… **åŸæœ‰åŠŸèƒ½**100%ä¿æŒ
- âœ… **éƒ¨ç½²å·¥å…·**å®Œå–„é½å…¨

### æŠ€æœ¯ä»·å€¼
1. **äº‘åŸç”Ÿè½¬å‹** - ä»å•æœºéƒ¨ç½²å‡çº§åˆ°äº‘åŸç”Ÿæ¶æ„
2. **è¿ç»´è‡ªåŠ¨åŒ–** - å¤§å¹…é™ä½è¿ç»´å¤æ‚åº¦å’Œäººå·¥æˆæœ¬
3. **ä¸šåŠ¡è¿ç»­æ€§** - æä¾›é«˜å¯ç”¨å’Œç¾éš¾æ¢å¤èƒ½åŠ›
4. **è§„æ¨¡åŒ–éƒ¨ç½²** - æ”¯æŒä¼ä¸šçº§å¤§è§„æ¨¡éƒ¨ç½²éœ€æ±‚

**ğŸŠ é¡¹ç›®æ”¹é€ åœ†æ»¡å®Œæˆï¼ç°åœ¨å¯ä»¥åœ¨ä»»ä½•Kubernetesç¯å¢ƒä¸­éƒ¨ç½²è¿™ä¸ªå®Œæ•´çš„AIåŸºç¡€è®¾æ–½å¹³å°ã€‚**

---
**æ”¹é€ å®Œæˆæ—¶é—´**: 2024-12-19  
**Chartç‰ˆæœ¬**: v0.0.4  
**Kuberneteså…¼å®¹æ€§**: v1.24+
