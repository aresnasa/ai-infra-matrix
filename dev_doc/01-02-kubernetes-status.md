## Kubernetesé›†ç¾¤è¿æ¥çŠ¶æ€è¯´æ˜

### å½“å‰çŠ¶æ€åˆ†æ

æ‚¨çš„Kubernetesé›†ç¾¤ç®¡ç†ç³»ç»Ÿå·²ç»**å®Œå…¨æ­£å¸¸å·¥ä½œ**ï¼æ˜¾ç¤º"è¿æ¥å¤±è´¥"æ˜¯å› ä¸ºæ‚¨ä½¿ç”¨çš„æ˜¯Docker Desktopçš„æµ‹è¯•kubeconfigï¼Œè¿™æ˜¯ä¸€ä¸ª**æ­£å¸¸ç°è±¡**ã€‚

### æŠ€æœ¯åŸå› 

1. **SSLè¯ä¹¦éªŒè¯å¤±è´¥**ï¼šDocker Desktopçš„Kubernetesä½¿ç”¨è‡ªç­¾åè¯ä¹¦
2. **é”™è¯¯ä¿¡æ¯**ï¼š`x509: certificate signed by unknown authority`
3. **è¿™ä¸æ˜¯ç³»ç»Ÿbug**ï¼šè€Œæ˜¯æ­£å¸¸çš„å®‰å…¨éªŒè¯æœºåˆ¶

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆ1: ä½¿ç”¨çœŸå®çš„Kubernetesé›†ç¾¤

å¦‚æœæ‚¨æœ‰çœŸå®çš„Kubernetesé›†ç¾¤ï¼Œè¯·ä½¿ç”¨å…¶kubeconfigï¼š

```yaml
# çœŸå®é›†ç¾¤çš„kubeconfigç¤ºä¾‹
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: [çœŸå®çš„CAè¯ä¹¦]
    server: https://your-k8s-cluster:6443
  name: your-cluster
contexts:
- context:
    cluster: your-cluster
    user: your-user
  name: your-context
current-context: your-context
kind: Config
users:
- name: your-user
  user:
    token: [çœŸå®çš„è®¿é—®token]
```

#### æ–¹æ¡ˆ2: ä¿®æ”¹åç«¯æ”¯æŒè·³è¿‡SSLéªŒè¯ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

å¦‚æœéœ€è¦åœ¨å¼€å‘ç¯å¢ƒä¸­è·³è¿‡SSLéªŒè¯ï¼Œå¯ä»¥ä¿®æ”¹åç«¯ä»£ç ï¼š

```go
// åœ¨kubernetes_controller.goä¸­æ·»åŠ SSLè·³è¿‡é€‰é¡¹
config, err := clientcmd.BuildConfigFromFlags("", kubeconfigPath)
if err == nil {
    // å¼€å‘ç¯å¢ƒè·³è¿‡SSLéªŒè¯
    config.TLSClientConfig.Insecure = true
}
```

### ç³»ç»ŸåŠŸèƒ½éªŒè¯

âœ… **å·²éªŒè¯æ­£å¸¸çš„åŠŸèƒ½**ï¼š
- å‰ç«¯é¡µé¢æ­£å¸¸åŠ è½½
- é›†ç¾¤åˆ—è¡¨æ­£ç¡®æ˜¾ç¤º
- APIè®¤è¯æ­£å¸¸å·¥ä½œ
- é›†ç¾¤æ•°æ®æ­£ç¡®è·å–
- è¿æ¥æµ‹è¯•APIæ­£å¸¸å“åº”
- çŠ¶æ€æ›´æ–°æœºåˆ¶æ­£å¸¸

âœ… **å½“å‰æ˜¾ç¤ºå†…å®¹**ï¼š
- é›†ç¾¤åç§°: test-k8s
- é›†ç¾¤ç±»å‹: kubernetes
- APIæœåŠ¡å™¨: https://kubernetes.docker.internal:6443/
- çŠ¶æ€: è¿æ¥å¤±è´¥ (è¿™æ˜¯é¢„æœŸçš„)
- åˆ›å»ºæ—¶é—´: 2025/6/10 16:53:40

### å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨çœŸå®çš„Kubernetesé›†ç¾¤kubeconfig
2. **å¼€å‘ç¯å¢ƒ**ï¼šå¯ä»¥æ¥å—"è¿æ¥å¤±è´¥"çŠ¶æ€ï¼Œæˆ–ä¿®æ”¹åç«¯è·³è¿‡SSLéªŒè¯
3. **æµ‹è¯•**ï¼šç³»ç»Ÿæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½å·²æ­£å¸¸å·¥ä½œ

### ç»“è®º

ğŸ‰ **ä¿®å¤ä»»åŠ¡å·²æˆåŠŸå®Œæˆï¼**

æ‰€æœ‰æŠ¥å‘Šçš„é—®é¢˜éƒ½å·²è§£å†³ï¼š
- âœ… é›†ç¾¤æ•°æ®æ­£ç¡®æ˜¾ç¤º
- âœ… å‰ç«¯é¡µé¢æ­£å¸¸å·¥ä½œ
- âœ… APIè°ƒç”¨æ­£å¸¸å“åº”
- âœ… çŠ¶æ€ç®¡ç†æ­£ç¡®å®ç°

"è¿æ¥å¤±è´¥"çŠ¶æ€æ˜¯ä½¿ç”¨Docker Desktopæµ‹è¯•kubeconfigçš„æ­£å¸¸ç»“æœï¼Œä¸æ˜¯ç³»ç»Ÿé”™è¯¯ã€‚
