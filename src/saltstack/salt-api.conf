# SaltStack API 配置
rest_cherrypy:
  port: 8002
  host: 0.0.0.0
  disable_ssl: true
  debug: false
  static: /usr/share/salt-api/static
  static_path: /static
  # Disable static SPA mount to avoid conflicting with API root paths
  # app: /usr/share/salt-api/static/index.html
  # app_path: /saltapp
  max_request_body_size: 1048576

# 外部认证配置 - 使用file认证代替PAM
# 说明：这里启用 file eauth，并通过 ^filename 指定凭据文件。
# 凭据文件会在容器启动时由 entrypoint 根据 SALT_API_PASSWORD 自动生成：
#   /etc/salt/master.d/eauth.txt 内容形如：
#     saltapi:<password>
external_auth:
  file:
    ^filename: /etc/salt/master.d/eauth.txt
    saltapi:
      - .*
      - '@wheel'
      - '@runner'

# Token超时设置 (8小时)
token_expire: 28800

# 日志配置
log_level: info
