<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Auth Debug</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 24px; }
    pre { background:#f6f8fa; padding:12px; border-radius:8px; overflow:auto; }
    .ok { color: #0a0; }
    .bad { color: #a00; }
    .muted { color:#666; }
  </style>
  <script>
    async function run() {
      const out = document.getElementById('out');
      const cookies = document.cookie;
      append(out, `Client cookies: ${cookies || '(none)'}`);
      try {
        const res = await fetch('/debug/verify', { credentials: 'include' });
        const text = await res.text();
        append(out, `\n/debug/verify status: ${res.status}`);
        append(out, `Headers:`);
        res.headers.forEach((v, k) => append(out, `  ${k}: ${v}`));
        append(out, `\nBody:\n${text}`);
      } catch (e) {
        append(out, `Error: ${e}`);
      }
    }
    function append(node, s) { node.textContent += s + "\n"; }
    window.addEventListener('DOMContentLoaded', run);
  </script>
</head>
<body>
  <h1>Auth Debug</h1>
  <p class="muted">This page shows browser cookies and the result of calling /debug/verify (which assembles Authorization from cookies).</p>
  <pre id="out"></pre>
</body>
</html>
